<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div id="topbar">
  <div id="topbar-content">
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/enigma">Enigma</a></li>
      <li><a href="/balls">Applet</a></li>
      <li><a href="/blog">Blog</a></li>
    </ul>
  </div>
</div>

<div id="container">
  <div id="header">
    <h1><a href="/enigma">Software Implementation of the Enigma Machine</a></h1>
  </div>

  <div id="rightbar">
    <h2>How it works</h2>

    <p>Details about the enigma machine...</p>
  </div>

  <div id="content">
    
    <%= form_for :post, :url => "enigma/random" do |f| %>
        <p><input name="commit" type="submit" value="Random Settings" /></p></p>
    <% end %>

    <%= form_for :post, :url => "enigma/load" do |f| %>
        <p>Settings: <input id="post_settings" name="post[settings]" size="81" type="text" value="<%= @settings %>" /><br/>
          <input name="commit" type="submit" value="Load Settings" /></p>
    <% end %>

    <div id="enigma-form">
      <%= form_for :post, :url => "enigma" do |f| %>
          <p>
            Enigma uses a number of pre-defined rotors in a particular configuration. Choose any number of rotors from
            the
            predefined rotors 1 to 8.<br/>
            Rotor numbers:
            <input id="post_rotor_numbers" name="post[rotor_numbers]" size="81" type="text" value="<%= @rotor_numbers %>"/><br/>
            <br/>
            Each rotor is set to a particular offset letter, enter these letters in order of the rotors.<br/>
            Rotor offsets:
            <input id="post_rotor_offsets" name="post[rotor_offsets]" size="81" type="text" value="<%= @rotor_offsets %>"/><br/>
            <br/>
            Enigma uses a single reflector from a choice of 5. Select one.<br/>
            Reflector number:
            <input id="post_reflector_number" name="post[reflector_number]" size="81" type="text" value="<%= @reflector_number %>"/><br/>
            <br/>
            Enigma has a plugboard which can switch particular letters. Input letters to switch in the following format
            'AB,GZ'.<br/>
            Plugboard settings:
            <input id="post_plugboard" name="post[plugboard]" size="81" type="text" value="<%= @plugboard %>"/><br/>
            <br/>
            <br/> Enter text to cipher: <br/>
            <textarea cols="65" id="post_input_text" name="post[input_text]" rows="8"></textarea><br/>
            <input name="commit" type="submit" value="Cipher" />
          </p>
      <% end %>
    </div>
    <% unless @output.nil? %>
        <p>Output: <%= @output %><br/>
          Settings <%= @settings %></p>
    <% end %>

    <p> Number of cipherings: <%= @cipher_count %></p>
  </div>

  <div id="footer">
    <div id="footer-right">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/enigma">Enigma</a></li>
        <li><a href="/balls">Applet</a></li>
        <li><a href="/blog">Blog</a></li>
      </ul>
    </div>

    <div class="g-plusone" data-width="450"></div>
    <div class="fb-like" data-href="http://dynomike.co.uk/enigma" data-send="false" data-width="450" data-show-faces="false"></div>
  </div>

</div>

<script type="text/javascript">
    window.___gcfg = {lang: 'en-GB'};

    (function() {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();
</script>
